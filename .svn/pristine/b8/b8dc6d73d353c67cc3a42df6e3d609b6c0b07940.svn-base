import React, { useState } from 'react';
import MonthlyStatsChart from './components/MonthlyStatsChart';

const StatisticsManager = () => {
  const [activeTab, setActiveTab] = useState('revenue'); 
  const [year, setYear] = useState(2026);

  return (
    // ì „ì²´ ë ˆì´ì•„ì›ƒ: í™”ë©´ ê½‰ ì±„ìš°ê³  ìŠ¤í¬ë¡¤ ìˆ¨ê¹€
    <div className="flex w-full gap-4 h-[calc(100vh-140px)] font-['Pretendard'] text-zinc-950 overflow-hidden">
      
      {/* ğŸŸ¢ [ì‚¬ì´ë“œë°”] ë„ˆë¹„ w-64 (í‘œì¤€) */}
      <aside className="w-64 shrink-0 rounded-xl bg-white border border-slate-200 shadow-sm flex flex-col overflow-hidden">
        {/* í—¤ë” */}
        <div className="p-5 border-b border-slate-100 flex items-center gap-2 bg-slate-50/50">
          <div className="w-1 h-4 bg-blue-600 rounded-full"></div>
          <h2 className="text-base font-bold text-slate-800">ë¶„ì„ í•­ëª© ì„ íƒ</h2>
        </div>
        
        <div className="flex-1 p-3 space-y-1 overflow-y-auto">
          {/* ë§¤ì¶œ íƒ­ */}
          <div className="px-3 py-2 text-[11px] font-bold text-slate-400 uppercase tracking-wider mt-2">ë§¤ì¶œ ë¶„ì„</div>
          <button 
            onClick={() => setActiveTab('revenue')}
            className={`w-full text-left px-4 py-3 rounded-xl transition-all text-sm font-bold flex justify-between items-center
              ${activeTab === 'revenue' 
                ? 'bg-blue-50 text-blue-600 shadow-sm ring-1 ring-blue-100' 
                : 'hover:bg-slate-50 text-slate-600'}`}
          >
            ë³‘ì› ë§¤ì¶œ í˜„í™©
            {activeTab === 'revenue' && <span className="w-1.5 h-1.5 rounded-full bg-blue-600"></span>}
          </button>

          {/* í™˜ì íƒ­ */}
          <div className="px-3 py-2 text-[11px] font-bold text-slate-400 uppercase tracking-wider mt-3">í™˜ì ë¶„ì„</div>
          <button 
            onClick={() => setActiveTab('patient')}
            className={`w-full text-left px-4 py-3 rounded-xl transition-all text-sm font-bold flex justify-between items-center
              ${activeTab === 'patient' 
                ? 'bg-blue-50 text-blue-600 shadow-sm ring-1 ring-blue-100' 
                : 'hover:bg-slate-50 text-slate-600'}`}
          >
            ì™¸ë˜/ì…ì› í™˜ì í˜„í™©
            {activeTab === 'patient' && <span className="w-1.5 h-1.5 rounded-full bg-blue-600"></span>}
          </button>
        </div>
      </aside>

      {/* ğŸ”µ [ë©”ì¸ ì»¨í…ì¸  ë ˆì´ì•„ì›ƒ] */}
      <section className="flex-1 rounded-xl bg-white border border-slate-200 shadow-sm flex flex-col overflow-hidden">
        
        {/* í—¤ë” */}
        <div className="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-10 shrink-0">
          <div>
            <h2 className="text-lg font-bold text-slate-900">
              {activeTab === 'revenue' ? 'ë³‘ì› ë§¤ì¶œ í˜„í™©' : 'ì™¸ë˜ ë° ì…ì› í™˜ì í˜„í™©'}
            </h2>
            <p className="text-xs text-slate-500 mt-1 font-medium">
              {activeTab === 'revenue' 
                ? `${year}ë…„ë„ ì›”ë³„ ì†ìµ ì§€í‘œ ë° ìƒì„¸ ë‚´ì—­` 
                : `${year}ë…„ë„ í™˜ì ìœ í˜•ë³„ ëˆ„ì  í†µê³„`}
            </p>
          </div>
          <div className="flex gap-2">
            <select 
              value={year} 
              onChange={(e) => setYear(Number(e.target.value))}
              className="bg-slate-50 border border-slate-200 rounded-lg px-3 py-1.5 text-xs font-bold outline-none cursor-pointer hover:border-blue-400 transition-colors"
            >
              {[2024, 2025, 2026, 2027].map(y => <option key={y} value={y}>{y}ë…„</option>)}
            </select>
          </div>
        </div>

        {/* ì°¨íŠ¸ ì˜ì—­ */}
        <div className="flex-1 overflow-hidden p-5 bg-slate-50/30">
             <MonthlyStatsChart activeTab={activeTab} year={year} />
        </div>

      </section>
    </div>
  );
};

export default StatisticsManager;